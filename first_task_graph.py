import networkx as nx
import matplotlib.pyplot as plt

# Створюємо граф
G = nx.DiGraph()

# Додаємо ребра з пропускною здатністю
edges = [
    ("T1", "W1", 25),
    ("T1", "W2", 20),
    ("T1", "W3", 15),
    ("T2", "W2", 10),
    ("T2", "W3", 15),
    ("T2", "W4", 30),
    ("W1", "M1", 15),
    ("W1", "M2", 10),
    ("W1", "M3", 20),
    ("W2", "M4", 15),
    ("W2", "M5", 10),
    ("W2", "M6", 25),
    ("W3", "M7", 20),
    ("W3", "M8", 15),
    ("W3", "M9", 10),
    ("W4", "M10", 20),
    ("W4", "M11", 10),
    ("W4", "M12", 15),
    ("W4", "M13", 5),
    ("W4", "M14", 10),
]

# Додаємо всі ребра до графа
G.add_weighted_edges_from(edges)

pos = {
    # Термінали (центр)
    "T1": (2.5, 3),
    "T2": (3.5, 3),
    # Верхні склади
    "W1": (2, 5),
    "W2": (4, 5),
    # Нижні склади
    "W4": (2, 1),
    "W3": (4, 1),
    # Магазини від W1 (M1–M3) — ще вище
    "M1": (1.5, 6),
    "M2": (2, 6.5),
    "M3": (2.5, 6),
    # Магазини від W2 (M4–M6) — ще вище
    "M4": (3.5, 6),
    "M5": (4, 6.5),
    "M6": (4.5, 6),
    # Магазини від W4 (M10–M14) — ще нижче
    "M10": (1, 0),
    "M11": (1.5, -0.5),
    "M12": (2, -1),
    "M13": (2.5, -0.5),
    "M14": (3, 0),
    # Магазини від W3 (M7–M9) — нижче
    "M7": (3.5, -0.5),
    "M8": (4, -1),
    "M9": (4.5, -0.5),
}


# Малюємо граф
plt.figure(figsize=(10, 6))
nx.draw(
    G,
    pos,
    with_labels=True,
    node_size=2000,
    node_color="skyblue",
    font_size=12,
    font_weight="bold",
)
labels = nx.get_edge_attributes(G, "weight")
nx.draw_networkx_edge_labels(G, pos, edge_labels=labels)

# Відображаємо граф
plt.show()
